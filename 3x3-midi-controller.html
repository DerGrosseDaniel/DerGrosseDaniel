<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>3x3 midi controller - useless.blue</title><meta name="description" content="I wanted to build a small midi controller. It should be cheap, 3d-printable and with usb."><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://useless.blue/3x3-midi-controller.html"><link rel="amphtml" href="https://useless.blue/amp/3x3-midi-controller.html"><link type="application/atom+xml" rel="alternate" href="https://useless.blue/feed.xml"><meta property="og:title" content="3x3 midi controller"><meta property="og:image" content="https://useless.blue/media/posts/8/IMG_20190330_121643.jpg"><meta property="og:site_name" content="useless.blue"><meta property="og:description" content="I wanted to build a small midi controller. It should be cheap, 3d-printable and with usb."><meta property="og:url" content="https://useless.blue/3x3-midi-controller.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet"><link rel="stylesheet" href="https://useless.blue/assets/css/style.css?v=e6c72ee2fd98b39d656be004594bcc07"><link rel="stylesheet" href="https://useless.blue/assets/css/photoswipe.css?v=f94529aaf8fd74b3f05f3587577a203d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://useless.blue/3x3-midi-controller.html"},"headline":"3x3 midi controller","datePublished":"2019-05-28T00:22","dateModified":"2019-06-01T03:50","image":{"@type":"ImageObject","url":"https://useless.blue/media/posts/8/IMG_20190330_121643.jpg","height":2976,"width":3968},"description":"<p>I wanted to build a small midi controller. It should be cheap, 3d-printable and with usb.</p>\n","author":{"@type":"Person","name":"DerGrosseDaniel"},"publisher":{"@type":"Organization","name":"DerGrosseDaniel"}}</script><script async src="https://useless.blue/assets/js/lazysizes.min.js?v=2b604cc54166522c287f131ead6e4d44"></script><style>.pswp--svg .pswp__button,
				          .pswp--svg .pswp__button--arrow--left:before,
				          .pswp--svg .pswp__button--arrow--right:before {
					          background-image: url(https://useless.blue/assets/svg/gallery-icons-light.svg);
			              }</style></head><body><div class="container"><div class="content js-content"><header><div class="top"><a class="logo" href="https://useless.blue/">useless.blue</a></div><div class="top top--right is-sticky"></div></header><main class="main"><article class="post"><div class="main__left"><div class="hero"><img src="https://useless.blue/media/posts/8/IMG_20190330_121643.jpg" sizes="(min-width: 61.3125em) 50vw, 100vw" srcset="https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-xs.jpg 300w, https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-sm.jpg 480w, https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-md.jpg 768w, https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-lg.jpg 1024w, https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-xl.jpg 1280w, https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-2xl.jpg 1600w" alt=""></div><header><h1>3x3 midi controller</h1><p><time datetime="2019-05-28T00:22">May 28, 2019 </time>by <a href="https://useless.blue/authors/dergrossedaniel/" rel="author" title="DerGrosseDaniel">DerGrosseDaniel</a></p></header></div><div class="main__right"><div class="post__entry"><p>I wanted to build a small midi controller. It should be cheap, 3d-printable and with usb.</p><div class="post__toc"><h3>Table of Contents</h3><ul><li><a href="#mcetoc_1dbtiai510">Parts</a></li><li><a href="#mcetoc_1dbtices02">Enclosure</a></li><li><a href="#mcetoc_1dbtjihlj0">Electronics</a></li><li><a href="#mcetoc_1dbtk56sj1">Drivers</a></li><li><a href="#mcetoc_1dbtk8uv32">Software</a></li><li><a href="#mcetoc_1dbtks6223">Assembly</a></li></ul></div><h2 id="mcetoc_1dbtiai510">Parts</h2><p>I bought the cheapest 100k linear potentiometers I could find (10k or 50k would be fine to, logarithmic ones would also be <span class="hiddenSpellError">ok</span>). Just search for B100K or B50K on your favourite site.<br><br>As controller, I needed a board with an Atmega32u4 chip for <span class="hiddenSpellError">usb</span> support. I got a clone of an <span class="hiddenSpellError">Arduino</span> micro pro (this is not an official <span class="hiddenSpellError">arduino</span> board, it was a <span class="hiddenSpellError">Sparkfun</span> board) You can find it if you search for <span class="hiddenGrammarError">"</span><span class="hiddenSpellError">arduino</span> micro pro <span class="hiddenSpellError">usb</span> atmega32u4 5v<span class="hiddenGrammarError">"</span>.</p><div class="gallery" data-is-empty="false" data-columns="2"><figure class="gallery__item"><a href="https://useless.blue/media/posts/8/gallery/adruino-pro-micro.jpg" data-size="898x677"><img src="https://useless.blue/media/posts/8/gallery/adruino-pro-micro-thumbnail.jpg" alt="" width="768" height="579"></a></figure><figure class="gallery__item"><a href="https://useless.blue/media/posts/8/gallery/potis.jpg" data-size="640x603"><img src="https://useless.blue/media/posts/8/gallery/potis-thumbnail.jpg" alt="" width="768" height="724"></a></figure></div><h2 id="mcetoc_1dbtices02">Enclosure</h2><p>I decided to go with a 3 by 3 matrix of potentiometers and designed an enclosure in Fusion 360.<br><br>I modelled everything as one box with the hole in the top (the blue part) and added a base for the bottom to close everything up. I also moddeled a few knobs for the potentiometers. The print was pretty straight forward.</p><div class="gallery" data-is-empty="false" data-columns="3"><figure class="gallery__item"><a href="https://useless.blue/media/posts/8/gallery/20190324-MidiController-v3.png" data-size="1518x995"><img src="https://useless.blue/media/posts/8/gallery/20190324-MidiController-v3-thumbnail.png" alt="" width="768" height="503"></a></figure><figure class="gallery__item"><a href="https://useless.blue/media/posts/8/gallery/IMG_20190328_172648.jpg" data-size="3968x2976"><img src="https://useless.blue/media/posts/8/gallery/IMG_20190328_172648-thumbnail.jpg" alt="" width="768" height="576"></a></figure><figure class="gallery__item"><a href="https://useless.blue/media/posts/8/gallery/Poti-Knob-v3.png" data-size="1518x995"><img src="https://useless.blue/media/posts/8/gallery/Poti-Knob-v3-thumbnail.png" alt="" width="768" height="503"></a></figure></div><p>The Fusion 360 files for the parts and the stls can be downloaded here: <a href="http://useless.blue/media/files/MidiController.zip">http://useless.blue/media/files/MidiController.zip</a></p><h2 id="mcetoc_1dbtjihlj0">Electronics</h2><p>I put all the potentiometers in their holes. It was a pretty tight fit, some pins had to be bent. The next time I will give me a millimetre or two more.<br><br>I soldered all the right pins together and all the left pins together. One of them I soldered to ground and the other to 5V. To find out which side you want to solder to ground or 5V, you have to measure with a multimeter. Turn the potentiometer all the way low and measure the resistance between the middle pin and the outside pins. The pin which is 0 ohms you want to connect to ground, the other to 5V.</p><p><img class="lazyload" src="https://useless.blue/media/posts/8/responsive/IMG_20190328_181018-xs.jpg" data-sizes="auto" data-srcset="https://useless.blue/media/posts/8/responsive/IMG_20190328_181018-xs.jpg 300w ,https://useless.blue/media/posts/8/responsive/IMG_20190328_181018-sm.jpg 480w ,https://useless.blue/media/posts/8/responsive/IMG_20190328_181018-md.jpg 768w" alt="" width="3968" height="2976"></p><p> Now connect all the middle pins of the potentiometer to a cable and the other side to the analog pins of the controller. You can find the pinout here: <a href="https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide" target="_blank" rel="noopener noreferrer">https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide</a></p><p><img class="lazyload" src="https://useless.blue/media/posts/8/responsive/523a1765757b7f5c6e8b4567-xs.png" data-sizes="auto" data-srcset="https://useless.blue/media/posts/8/responsive/523a1765757b7f5c6e8b4567-xs.png 300w ,https://useless.blue/media/posts/8/responsive/523a1765757b7f5c6e8b4567-sm.png 480w ,https://useless.blue/media/posts/8/responsive/523a1765757b7f5c6e8b4567-md.png 768w" alt="" width="785" height="655"></p><p>Take notes which potentiometer you connect to which pin.</p><p><img class="lazyload" src="https://useless.blue/media/posts/8/responsive/IMG_20190329_195226-xs.jpg" data-sizes="auto" data-srcset="https://useless.blue/media/posts/8/responsive/IMG_20190329_195226-xs.jpg 300w ,https://useless.blue/media/posts/8/responsive/IMG_20190329_195226-sm.jpg 480w ,https://useless.blue/media/posts/8/responsive/IMG_20190329_195226-md.jpg 768w" alt="" width="2976" height="3968"></p><h2 id="mcetoc_1dbtk56sj1">Drivers</h2><p>Follow these instructions and install the driver for the controller and prepare the <span class="hiddenSpellError">arduino</span> IDE. https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide/installing-windows<br>When there are problems with the programming, here is a trouble shooting guide https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide#troubleshooting-and-faq I for example had problems to get the controller programmed. I had to double reset it and chose the <span class="hiddenSpellError">com</span> port every time again.</p><h2 id="mcetoc_1dbtk8uv32">Software</h2><p>We will use the Midi controller library by tttpapa <a href="https://github.com/tttapa/MIDI_controller" target="_blank" rel="noopener noreferrer">https://github.com/tttapa/MIDI_controller</a>. Download and install it.</p><p>This is our ardino code:</p><p><code>#include &lt;MIDI_Controller.h&gt; // Include the library<br><br>// Create a new instance of the class 'Analog', called 'potentiometer', on pin A0,<br>Analog potentiometer(A1, 1, 1);<br>Analog potentiometer2(A2, 2, 1);<br>Analog potentiometer3(A3, 3, 1);<br>Analog potentiometer4(A0, 4, 1);<br>Analog potentiometer5(A6, 7, 1);<br>Analog potentiometer6(A7, 8, 1);<br>Analog potentiometer7(A8, 9, 1);<br>Analog potentiometer8(A9, 6, 1);<br>Analog potentiometer9(A10, 5, 1);<br><br>void setup() {}<br><br>void loop() {<br>// Refresh the MIDI controller (check whether the potentiometer's input has changed since last time, if so, send the new value over MIDI)<br>MIDI_Controller.refresh();<br>}</code></p><p>The lines "Analog potentiometer(A1, 1, 1);" define wich pins are connected to what midi channel.</p><h2 id="mcetoc_1dbtks6223">Assembly</h2><p>There is nothing more to do then to glue the controller in place, close the bottom up and put the caps on the knobs.</p><p><img class="lazyload" src="https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-xs.jpg" data-sizes="auto" data-srcset="https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-xs.jpg 300w ,https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-sm.jpg 480w ,https://useless.blue/media/posts/8/responsive/IMG_20190330_121643-md.jpg 768w" alt="" width="3968" height="2976"></p><footer><ul class="post__tag"><li><a href="https://useless.blue/3d/">3d</a></li><li><a href="https://useless.blue/3d-printer/">3d printer</a></li><li><a href="https://useless.blue/circuit/">circuit</a></li><li><a href="https://useless.blue/diy/">diy</a></li><li><a href="https://useless.blue/electronic/">electronic</a></li><li><a href="https://useless.blue/electronics/">electronics</a></li><li><a href="https://useless.blue/one-day-build/">one day build</a></li><li><a href="https://useless.blue/synthesizer/">synthesizer</a></li></ul><div class="post__share"></div><div class="post__bio"><h3><a href="https://useless.blue/authors/dergrossedaniel/" title="DerGrosseDaniel">DerGrosseDaniel</a></h3><p>Insta: @dergrossedaniel --- flickr: wedaka --- github: DerGrosseDaniel</p></div></footer></div></div></article></main><footer class="footer"><div class="footer__copyright">Powered by Publii</div></footer></div></div><script defer="defer" src="https://useless.blue/assets/js/jquery-3.2.1.slim.min.js?v=f307ecc7f6353949f03c06ffa70652a2"></script><script defer="defer" src="https://useless.blue/assets/js/scripts.js?v=2f88524543ee97cef94edcae42c42b7f"></script><script defer="defer" src="https://useless.blue/assets/js/photoswipe.min.js?v=9c62086e50d89a9b6a29389a70ee0d65"></script><script defer="defer" src="https://useless.blue/assets/js/photoswipe-ui-default.min.js?v=aafb02c13ce2b295ff34a8ac0db67cbb"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
                linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
                if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
                item.el=figureEl;items.push(item);}
                return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
                var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
                if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
                nodeIndex++;}
                if(index>=0){openPhotoSwipe(index,clickedGallery);}
                return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
                var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
                var pair=vars[i].split('=');if(pair.length<2){continue;}
                params[pair[0]]=pair[1];}
                if(params.gid){params.gid=parseInt(params.gid,10);}
                return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
                mainClass:'pswp--dark',
                preload: [1,2],
                hideAnimationDuration:200,
                showAnimationDuration:0,
                bgOpacity: 0.7,
                showHideOpacity:true,
                closeOnScroll: true,
                arrowKeys: true,
                closeEl: true,
                captionEl: true,
                fullscreenEl: true,
                zoomEl: true,
                shareEl: true,
                counterEl: true,
                arrowEl: true,
                preloaderEl: true
                };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
                if(isNaN(options.index)){return;}
                if(disableAnimation){options.showAnimationDuration=0;}
                gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
                var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>